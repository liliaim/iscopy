  console.log("inn")
  const map = "<%=asset_path('map-full.svg')%>"
  const container = document.querySelector( '#map' )

  const res = await fetch( map )
  console.log(`res=${res}`)
  console.log(`container=${container}`)
  console.log("inn")


  if ( res.ok ) {
    const svg = await res.text()
  <%# console.log(`svg=${svg}`) %>


    container.innerHTML = svg
    const prefs = document.querySelectorAll( '.geolonia-svg-map .prefecture' )

    prefs.forEach( ( pref ) => {
      // マウスオーバーで色を変える
      pref.addEventListener( 'mouseover', ( event ) => {
        event.currentTarget.style.fill = "#00ff00"
      } )

      // マウスが離れたら色をもとに戻す
      pref.addEventListener( 'mouseleave', ( event ) => {
        event.currentTarget.style.fill = ""
      } )

// 全ての都道府県のSVG要素を取得
  const prefectureElements = document.querySelectorAll(".prefecture");

  // 各都道府県のクリックイベントを設定
  prefectureElements.forEach(prefecture => {
    prefecture.addEventListener("click", function() {
      const prefectureCode = this.getAttribute("data-code");
      
      // 対応するplan_pathにリダイレクト
      window.location.href = `/plans/${prefectureCode}`;
    });
  });

   
    } )
  }
